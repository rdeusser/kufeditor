<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:views="clr-namespace:KUFEditor.UI.Views"
        mc:Ignorable="d" d:DesignWidth="1280" d:DesignHeight="720"
        x:Class="KUFEditor.UI.KUFEditor"
        Title="KUFEditor - Kingdom Under Fire Editor"
        Width="1280" Height="720"
        MinWidth="800" MinHeight="500"
        WindowStartupLocation="CenterScreen"
        Background="{DynamicResource ThemeContentBackgroundColor}">

    <Window.Resources>
        <!-- Ryujinx Dark Theme Colors -->
        <Color x:Key="ThemeContentBackgroundColor">#2D2D2D</Color>
        <Color x:Key="ThemeControlBorderColor">#505050</Color>
        <Color x:Key="ThemeForegroundColor">#FFFFFF</Color>
        <Color x:Key="MenuFlyoutPresenterBorderColor">#3D3D3D</Color>
        <Color x:Key="AppListBackgroundColor">#0FFFFFFF</Color>
        <Color x:Key="AppListHoverBackgroundColor">#1EFFFFFF</Color>
        <Color x:Key="SecondaryTextColor">#A0FFFFFF</Color>
        <Color x:Key="PanelBackground">#252526</Color>
        <Color x:Key="SurfaceBackground">#333337</Color>
        <Color x:Key="ElevatedBackground">#3D3D3D</Color>

        <!-- Brushes -->
        <SolidColorBrush x:Key="ThemeContentBackgroundBrush" Color="{StaticResource ThemeContentBackgroundColor}"/>
        <SolidColorBrush x:Key="ThemeControlBorderBrush" Color="{StaticResource ThemeControlBorderColor}"/>
        <SolidColorBrush x:Key="ThemeForegroundBrush" Color="{StaticResource ThemeForegroundColor}"/>
        <SolidColorBrush x:Key="SecondaryTextBrush" Color="{StaticResource SecondaryTextColor}"/>
        <SolidColorBrush x:Key="PanelBackgroundBrush" Color="{StaticResource PanelBackground}"/>
        <SolidColorBrush x:Key="SurfaceBackgroundBrush" Color="{StaticResource SurfaceBackground}"/>
        <SolidColorBrush x:Key="ElevatedBackgroundBrush" Color="{StaticResource ElevatedBackground}"/>
    </Window.Resources>

    <Window.Styles>
        <!-- Panel container style -->
        <Style Selector="Border.panel-container">
            <Setter Property="Background" Value="{StaticResource PanelBackgroundBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="{StaticResource ThemeControlBorderBrush}"/>
            <Setter Property="CornerRadius" Value="4"/>
            <Setter Property="Margin" Value="4"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="ClipToBounds" Value="False"/>
        </Style>

        <!-- Grid splitter styles -->
        <Style Selector="GridSplitter">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Width" Value="8"/>
        </Style>

        <Style Selector="GridSplitter:pointerover">
            <Setter Property="Background" Value="{DynamicResource SystemAccentColorLight3}"/>
            <Setter Property="Opacity" Value="0.5"/>
        </Style>

        <!-- Menu styling -->
        <Style Selector="Menu">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Height" Value="35"/>
        </Style>

        <Style Selector="MenuItem">
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="FontSize" Value="12"/>
        </Style>

        <!-- Status bar separator -->
        <Style Selector="Border.status-separator">
            <Setter Property="Width" Value="1"/>
            <Setter Property="Background" Value="{StaticResource ThemeControlBorderBrush}"/>
            <Setter Property="Margin" Value="8,4"/>
        </Style>
    </Window.Styles>

    <DockPanel>
        <!-- Menu Bar -->
        <Border DockPanel.Dock="Top"
                Background="{StaticResource PanelBackgroundBrush}"
                BorderThickness="0,0,0,1"
                BorderBrush="{StaticResource ThemeControlBorderBrush}"
                Height="35">
            <DockPanel Margin="8,0">
                <!-- Logo/Title Area -->
                <TextBlock DockPanel.Dock="Left"
                           Text="KUFEditor"
                           FontSize="14"
                           FontWeight="SemiBold"
                           VerticalAlignment="Center"
                           Margin="0,0,12,0"/>

                <!-- Menu -->
                <Menu VerticalAlignment="Center">
                    <MenuItem Header="_File">
                        <MenuItem Header="_Open Workspace..." Name="OpenWorkspaceMenuItem"/>
                        <MenuItem Header="Open _Recent" Name="RecentMenuItem"/>
                        <Separator/>
                        <MenuItem Header="_Save" Name="SaveMenuItem" InputGesture="Ctrl+S"/>
                        <MenuItem Header="Save _All" Name="SaveAllMenuItem" InputGesture="Ctrl+Shift+S"/>
                        <Separator/>
                        <MenuItem Header="_Settings..." Name="SettingsMenuItem"/>
                        <Separator/>
                        <MenuItem Header="E_xit" Name="ExitMenuItem"/>
                    </MenuItem>
                    <MenuItem Header="_Edit">
                        <MenuItem Header="_Undo" Name="UndoMenuItem" InputGesture="Ctrl+Z"/>
                        <MenuItem Header="_Redo" Name="RedoMenuItem" InputGesture="Ctrl+Y"/>
                        <Separator/>
                        <MenuItem Header="Cu_t" Name="CutMenuItem" InputGesture="Ctrl+X"/>
                        <MenuItem Header="_Copy" Name="CopyMenuItem" InputGesture="Ctrl+C"/>
                        <MenuItem Header="_Paste" Name="PasteMenuItem" InputGesture="Ctrl+V"/>
                    </MenuItem>
                    <MenuItem Header="_View">
                        <MenuItem Header="_Workspace Navigator" Name="ToggleNavigatorMenuItem" Click="OnToggleWorkspace"/>
                        <MenuItem Header="_Info Panel" Name="ToggleInfoPanelMenuItem" Click="OnToggleInfoPanel"/>
                        <Separator/>
                        <MenuItem Header="_Refresh" Name="RefreshMenuItem" InputGesture="F5"/>
                    </MenuItem>
                    <MenuItem Header="_Tools">
                        <MenuItem Header="_Backup All Files" Name="BackupAllMenuItem"/>
                        <MenuItem Header="_Restore from Backup..." Name="RestoreBackupMenuItem"/>
                        <Separator/>
                        <MenuItem Header="Validate _SOX Files" Name="ValidateSoxMenuItem"/>
                    </MenuItem>
                    <MenuItem Header="_Help">
                        <MenuItem Header="_About KUFEditor" Name="AboutMenuItem"/>
                        <MenuItem Header="_Documentation" Name="DocsMenuItem"/>
                        <Separator/>
                        <MenuItem Header="_GitHub Repository" Name="GitHubMenuItem"/>
                    </MenuItem>
                </Menu>
            </DockPanel>
        </Border>

        <!-- Status Bar -->
        <Border DockPanel.Dock="Bottom"
                Background="{StaticResource PanelBackgroundBrush}"
                BorderThickness="0,1,0,0"
                BorderBrush="{StaticResource ThemeControlBorderBrush}"
                Height="22"
                Padding="12,0">
            <DockPanel>
                <!-- Right side status items -->
                <StackPanel DockPanel.Dock="Right"
                           Orientation="Horizontal">
                    <TextBlock Name="MemoryStatus"
                               Text="Memory: 0 MB"
                               VerticalAlignment="Center"
                               FontSize="11"
                               Foreground="{StaticResource SecondaryTextBrush}"/>

                    <Border Classes="status-separator"/>

                    <TextBlock Name="CursorPosition"
                               Text="Ln 1, Col 1"
                               VerticalAlignment="Center"
                               FontSize="11"
                               Foreground="{StaticResource SecondaryTextBrush}"/>
                </StackPanel>

                <!-- Left side status -->
                <StackPanel Orientation="Horizontal"
                           VerticalAlignment="Center">
                    <TextBlock Text="â—"
                               Name="RefreshIcon"
                               FontSize="10"
                               Margin="0,0,6,0"
                               Foreground="#4CAF50"/>
                    <TextBlock Name="StatusText"
                               Text="Ready"
                               VerticalAlignment="Center"
                               FontSize="11"
                               Foreground="{StaticResource SecondaryTextBrush}"/>
                </StackPanel>
            </DockPanel>
        </Border>

        <!-- Main Content Area -->
        <Panel Margin="4">
            <Grid Name="MainGrid">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="280" MinWidth="0"/>
                    <ColumnDefinition Width="8"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="8"/>
                    <ColumnDefinition Width="300" MinWidth="0"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Workspace Navigator -->
                <Border Grid.Column="0" Grid.Row="0"
                        Classes="panel-container"
                        Name="WorkspaceContainer">
                    <views:WorkspaceNavigator Name="WorkspaceNavigator"/>
                </Border>

                <!-- Left Splitter -->
                <GridSplitter Grid.Column="1" Grid.Row="0"
                              Name="WorkspaceSplitter"
                              ResizeDirection="Columns"
                              HorizontalAlignment="Stretch"/>

                <!-- Editor Area -->
                <Border Grid.Column="2" Grid.Row="0"
                        Classes="panel-container">
                    <views:EditorArea Name="EditorArea"/>
                </Border>

                <!-- Right Splitter -->
                <GridSplitter Grid.Column="3" Grid.Row="0"
                              Name="InfoPanelSplitter"
                              ResizeDirection="Columns"
                              HorizontalAlignment="Stretch"/>

                <!-- Info Panel -->
                <Border Grid.Column="4" Grid.Row="0"
                        Classes="panel-container"
                        Name="InfoPanelContainer">
                    <views:InfoPanel Name="InfoPanel"/>
                </Border>
            </Grid>
        </Panel>
    </DockPanel>
</Window>
